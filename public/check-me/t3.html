<!DOCTYPE html>

<html>

<head>

<title></title>

<meta charset="utf-8" />

</head>

<body>

<script>
var abi=[
	{
		"constant": false,
		"inputs": [
			{
				"name": "_add",
				"type": "address"
			}
		],
		"name": "addParticipant",
		"outputs": [
			{
				"name": "ok",
				"type": "bool"
			}
		],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "_add",
				"type": "address"
			},
			{
				"name": "_tokens",
				"type": "uint256"
			}
		],
		"name": "allocateTokens",
		"outputs": [
			{
				"name": "",
				"type": "bool"
			}
		],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [],
		"name": "distributePrize",
		"outputs": [
			{
				"name": "",
				"type": "bool"
			}
		],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [],
		"name": "endHackathon",
		"outputs": [
			{
				"name": "ok",
				"type": "bool"
			}
		],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [],
		"name": "endRegistration",
		"outputs": [
			{
				"name": "",
				"type": "bool"
			}
		],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "_add",
				"type": "address"
			}
		],
		"name": "getUrl",
		"outputs": [
			{
				"name": "",
				"type": "bytes32"
			}
		],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "_url",
				"type": "bytes32"
			}
		],
		"name": "newParticipant",
		"outputs": [
			{
				"name": "",
				"type": "bool"
			}
		],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": false,
				"name": "_add",
				"type": "address"
			},
			{
				"indexed": false,
				"name": "_url",
				"type": "bytes32"
			}
		],
		"name": "PartcipantAdded",
		"type": "event"
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "_tokens",
				"type": "uint256"
			}
		],
		"name": "setAllocatedTokens",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "_edition",
				"type": "uint256"
			}
		],
		"name": "setEdition",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "_name",
				"type": "bytes32"
			}
		],
		"name": "setHackName",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "_number",
				"type": "uint256"
			}
		],
		"name": "setParticipants",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "_score",
				"type": "uint256"
			}
		],
		"name": "setScores",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [],
		"name": "tokenRequest",
		"outputs": [
			{
				"name": "tokentoRequest",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": false,
				"name": "_add",
				"type": "address"
			},
			{
				"indexed": false,
				"name": "_tokens",
				"type": "uint256"
			}
		],
		"name": "TokensAllocated",
		"type": "event"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "allocatedTokens",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "edition",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "finalIndex",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [
			{
				"name": "_add",
				"type": "address"
			}
		],
		"name": "getScore",
		"outputs": [
			{
				"name": "_score",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "hackathonName",
		"outputs": [
			{
				"name": "",
				"type": "bytes32"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "index",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "totalParticipants",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	}
]


//contract address. please change the address to your own

var contractaddress = '0xc4e8e9bed07f5db202c197fd5c73ccb736f06f9d';
window.onload = function () {

// check to see if user has metamask addon installed on his browser. check to make sure web3 is defined

if (typeof web3 === 'undefined') {

document.getElementById('metamask').innerHTML = 'You need <a href="https://metamask.io/">MetaMask</a> browser plugin to run this example'

}

// call the getvalue function here

getvalue();

}


//function to retrieve the last inserted value on the blockchain

function getvalue() {

try {

// contract Abi defines all the variables,constants and functions of the smart contract. replace with your own abi



//instantiate and connect to contract address via Abi
var contract1 = new web3.eth.Contract(abi, contractaddress);
var contract2 = contract1.clone();
alert("C2: "+contract2);
var myAbi = web3.eth.contract(abi);

var myfunction = myAbi.at(contractaddress);

var contract2 = myAbi.clone();
console.log("Here"+contract2);

//call the get function of our SimpleStorage contract

myfunction.getValue.call(function (err, xname) {

if (err) { console.log(err) }

if (xname) {

//display value on the webpage

document.getElementById("xbalance").innerHTML = "last inserted value into the blockchain is : " + xname;

}

});

}

catch (err) {

document.getElementById("xbalance").innerHTML = err;

}

}

// function to add a new integer value to the blockchain

function setvalue() {

try {
//instantiate and connect to contract address via Abi

var myAbi = web3.eth.contract(abi);

var myfunction = myAbi.at(contractaddress);

//call the set function of our SimpleStorage contract

myfunction.setValue.sendTransaction(document.getElementById("xvalue").value, { from: web3.eth.accounts[0], gas: 4000000 }, function (error, result) {

if (!error) {

console.log(result);

} else {

console.log(error);

}

})

} catch (err) {

document.getElementById("xvalue").innerHTML = err;

}

}

</script>

<center>

<div id="metamask"></div>

<h3>Insert and retrieve value on the blockchain</h3>

<br />

<table>

<tr>

<td></td>

<td>

<div id="xbalance"></div>

</td>

</tr>

<tr>

<td>Insert a new value :</td>

<td>

<input id="xvalue" type="text" />

<input id="Button1" type="button" onclick="setvalue()" value="Add to Blockchain" />

</td>

</tr>

</table>

</center>

</body>

</html>
